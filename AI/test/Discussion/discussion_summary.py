import os
from dotenv import load_dotenv

# 환경변수 로드 및 GEMINI_API_KEY 가져오기
load_dotenv()
GEMINI_API_KEY = os.getenv("GEMINI_API_KEY")

import google.generativeai as genai

genai.configure(api_key=GEMINI_API_KEY)

instruction = """
당신은 회의록 요약 전문가입니다.
주어진 회의록 내용을 분석하여 아래의 세 가지 항목으로 요약본을 작성해 주세요.

1. **주요 논의사항**
   - 회의에서 다뤄진 주요 주제나 토론 내용을 간략하게 나열합니다.

2. **회의에서 유저에 의해 발생한 핵심 아이디어**
   - 회의 참여자가 제시한 핵심 아이디어나 독창적인 의견을 정리합니다.

3. **회의록을 바탕으로 AI가 분석한 아이디어 제안**
   - 회의 내용을 기반으로 AI가 추가로 제안하는 아이디어나 개선점을 구체적으로 작성합니다.

아래는 예시입니다:

주요 논의 사항
* 리나의 첨지 만남 동기에 대한 분석
* 현진건 작가의 '운수 좋은 날'과의 연관성 토론
* 시간여행 설정의 개연성 검토

회의에서 유저에 의해 발생한 핵심 아이디어
* 과거 인물과의 만남 모티브
* 시간여행 장치의 의미

회의록을 바탕으로 AI가 분석한 아이디어 제안
**시간여행의 규칙 체계화**
- 리나의 시간여행에 대한 명확한 규칙과 제약을 설정하여 이야기의 개연성을 높일 수 있습니다.
* 시간여행은 특정 조건에서만 가능
* 과거 변경 시 발생하는 부작용 설정
* 시간여행 횟수/기간 제한

아래 회의록을 참고하여 위와 같은 형식의 요약본을 작성해 주세요.
"""

model = genai.GenerativeModel(
    "models/gemini-2.0-flash", 
    system_instruction=instruction
)

discussion_minutes = """
김지수: "오늘 회의의 주제는 헤밍웨이의 『노인과 바다』입니다. 산티아고라는 한 어부의 투쟁을 통해 인간의 의지와 자연과의 관계를 어떻게 해석할 수 있는지 각자의 생각을 나누고자 합니다."
이민수: "이 소설은 단순한 어부의 이야기처럼 보이지만, 인간의 불굴의 의지와 한계 극복에 대한 깊은 메시지를 담고 있습니다. 산티아고의 투쟁은 우리 각자의 인생 도전과도 연결된다고 봅니다."
박하은: "맞습니다. 또한, 소설은 고독과 외로움, 그리고 자연 앞에서의 인간의 무력함을 동시에 보여주어, 인간 내면의 심리와 삶의 고난에 대해 다시 한 번 생각해보게 합니다."
최성민: "저는 산티아고의 고독한 싸움과 그의 끈기에서 영감을 받았습니다. 자연과의 싸움이 단순한 생존을 넘어 삶의 의미를 찾는 과정임을 잘 드러내고 있다고 생각합니다."
김지수: "산티아고는 단순한 어부가 아니라, 자신의 한계와 싸우며 인간 존재의 의미를 탐구하는 상징적인 인물입니다. 그의 내면적 갈등과 희망은 독자에게 깊은 인상을 남깁니다."
이민수: "그의 과거 경험과 끊임없는 도전은 우리 모두가 겪는 인생의 시련과 맞닿아 있습니다. 산티아고의 모습은 각자의 삶 속에서 희망과 인내를 되새기게 만듭니다."
박하은: "또한, 산티아고의 외로움과 고독은 사회적 관계의 부재뿐만 아니라, 내면의 고립감까지도 상징적으로 표현하고 있어 다양한 해석의 여지를 줍니다."
최성민: "헤밍웨이의 간결하고 직설적인 문체가 소설의 분위기를 효과적으로 전달합니다. 짧은 문장 속에 담긴 의미들이 독자에게 강렬하게 다가온다고 생각합니다."
김지수: "하지만 간결함이 때때로 감정의 미묘한 뉘앙스를 충분히 전달하지 못한다는 아쉬움도 있습니다. 그런 점에서는 독자마다 느끼는 감동이 다소 달라질 수 있겠네요."
이민수: "종합적으로, 『노인과 바다』는 인간의 도전정신과 자연과의 관계, 그리고 고독 속에서 피어나는 희망을 보여주는 작품입니다."
박하은: "우리 모두에게 인생의 시련과 도전을 다시 한 번 생각하게 만드는 소설이라 할 수 있습니다. 각자의 삶에 적용할 수 있는 보편적인 메시지가 있다고 느낍니다."
최성민: "오늘 토론을 통해 다양한 해석과 감상을 공유할 수 있어 매우 유익했습니다. 앞으로도 이런 토론을 통해 서로의 생각을 나누면 좋겠습니다."
김지수: "모두 감사드립니다. 오늘 논의한 내용들을 바탕으로 각자 깊이 있는 독서와 성찰의 시간을 가지길 바라며, 이로써 회의를 마칩니다."
"""

prompt = f"""
## 회의록 내용: {discussion_minutes}

**회의록 요약**
"""

response = model.generate_content(prompt)
print(response.text)